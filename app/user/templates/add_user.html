{% extends "base.html" %}
{% block title %}Add User{% endblock %}

{% block content %}
<h2>Add User</h2>

<form id="addUserForm" method="POST">
    {% csrf_token %}

    <!-- Full Name -->
    <div class="form-field">
        {{ form.full_name.label_tag }}
        {{ form.full_name }}
    </div>

    <!-- Email -->
    <div class="form-field">
        {{ form.email.label_tag }}
        {{ form.email }}
    </div>

    <!-- Gender -->
    <div class="form-field">
        {{ form.gender.label_tag }}
        {{ form.gender }}
    </div>

    <!-- Contact -->
    <div class="form-field">
        {{ form.contact.label_tag }}
        {{ form.contact }}
    </div>

    <!-- Group -->
    <div class="form-field">
        {{ form.groups.label_tag }}
        {{ form.groups }}
    </div>

    <!-- Password -->
    <div class="form-field">
        {{ form.password.label_tag }}
        {{ form.password }}
    </div> 

    <!-- Confirm Password -->
    <div class="form-field">
        <label for="id_confirm_password">Enter Password Again:</label>
        <input type="password" name="confirm_password" required id="id_confirm_password">
        <div class="error" id="confirm_password_error"></div>
    </div> 

    <!-- Buttons -->
    <div class="button-group">
        <button type="button" class="form-btn btn-submit"
            onclick="showConfirmPopup('Are you sure you want to add this user?', function(){
                const password_error = document.getElementById('confirm_password_error');
                password_error.textContent = '';

                const password = document.getElementById('id_password').value;
                const confirm_password = document.getElementById('id_confirm_password').value;

                console.log(password, ' ::: ', confirm_password);

                if (password !== confirm_password) {
                    password_error.textContent = 'Passwords do not match';
                    return;
                } 
                document.getElementById('addUserForm').submit(); 
            })">
            Add User
        </button>
        <button type="button" class="form-btn btn-back" 
            onclick="window.location.href='{% url 'view_users' %}'">
            Back
        </button>
    </div>
</form>

<style>
/* Form fields styling */
.form-field {
    margin-bottom: 15px;
    text-align: left;
}
.form-field input, .form-field select {
    width: 100%;
    padding: 12px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 14px;
    box-sizing: border-box;
}

/* Error messages */
.error {
    color: #dc3545;
    font-size: 12px;
    margin-top: 5px;
}

/* Buttons */
.form-btn {
    padding: 12px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    margin-right: 10px;
}
.btn-submit { background-color: #28a745; color: #fff; }
.btn-submit:hover { background-color: #218838; }
.btn-back { background-color: #6c757d; color: #fff; }
.btn-back:hover { background-color: #5a6268; }

/* Responsive */
@media screen and (max-width: 500px) {
    .form-btn { font-size: 12px; padding: 10px; }
    .form-field input, .form-field select { font-size: 14px; padding: 10px; }
}
</style>

{% endblock %}
